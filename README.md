## Price Processor : Сервис для ведения и упрощения менеджерам работу с прайсами
## Стек Технологий
- Языки программирования :
  + JavaScript
  + Python
- СУБД :
  + PostgreSQL
- Инструменты для разработки :
  + Git
  + Postman
  + PG Admin
- Библиотеки 
  + React
  + Redux Toolkit
  + RTK query
  + Ant Design

## Работа приложения

### 1. Cоздание склада.

![stock](https://github.com/Yasuoqp/Price-processor/blob/main/readmeIcon/stock.png)

> `Склад поставщика` - это обознанечение организаций, которые ежедневнно скидывают прайсы акктуальных позиций.

### 2. Добавление позиций в склад поставщика.
- В меню Склада есть кнопка загрузить
  + При нажатии открывает `popup` окно для загрузки
  + загрузка производится `xlsx` форматом 
- После нажатия на кнопку "Загрузить"
  + Запускается индикатор ожидания по окончанию всех итераций
  + В это время в синхроном режиме парсим `xlsx` файл, получая массив объектов
  + После получения объекта сравниваем его уже с существующими позициями
    + После сравнения создается 2 массива с уникальными и уже похожими позициями
    + Запускается следующая итерация для добавления айди в похожие из уже существующих `Сравнивается по Артиклу` 
    + Это нужно для возможности отправить массив объектов методом  `PUT` за раз. `Backend адаптировал под такой процесс, но нужен айди в объекте`
    + Делается все это для того, чтобы не терять данные в позиции, присвоенные позже в приложении, так как они будут в `Many To One` со Справочником 
    + Но поменять количество и цену на текущий момент указанных поставщиком нужно, не теряя связи со справочником 
      + Так как их может быть сотни, а то и тысячи, в ручную это занимает большое количество времени
    + Что касается уникальных - их отсеиваем для того, чтобы добавить новые позиции одним запросом методом 'POST' БД присваивает новый `id`
- После завершения всех итераций `popup` закрывается, и обновляет текущий склад, без потери место нахождения 
    + Почему я это отметил? Потому что README я пишу спустя год. На тот момент моим `Router Dom` был обычный `Redux` 
    + Это довольно сложный процесс, сейчас бы я сделал практически все по-другому, но как есть, это работает и помогает людям :)

> `Да, у вас возник вопрос почему ты решаешь эти проблемы на стороне клиента т.e во фронте ведь это должен был делать `backend`, на тот момент я был довольно плохо знаком с серьезным `WEB`, не знал все нюансы и тонкости, методологии и так далее. Это был мой первый проект, так как у меня не было наставника, а задачи ставил человек без опыта в айти и вообще разработки, задачи были примерно такого плана: "в 1С так! нам нужно так же" :) ` 

![upload](https://github.com/Yasuoqp/Price-processor/blob/main/readmeIcon/uploadStock.png)

### 3. Переход в редактор позиций после загрузки
  - На двойной клик в таблице по позиции открывает `popup` окно с формой для изменения 
    - в ней 3 вкладки форма для изменения самих значений в объекте, описание товара, а так же добавления справочника
    - Справочник - это как раз та причина, почему нельзя старые заменять на новые 
  - По завершению так же закрывается и обновляется `refetch` текущего склада

![redactor](https://github.com/Yasuoqp/Price-processor/blob/main/readmeIcon/product-info.png)
![directory](https://github.com/Yasuoqp/Price-processor/blob/main/readmeIcon/product-derictory.png)

### 4. Справочники

![directory](https://github.com/Yasuoqp/Price-processor/blob/main/readmeIcon/directory.png)

> При нажатии на справочник ниже показывает все позиции из разных складов, привязанные к выбранному справочнику

  - 2 кнопки вверху `Выгрузить` и `Обновить справочник`
    + `Обновить Справочник` открывается `popup` и работает по тому же принципу, что и добавление позиций.
      + у тех у кого один Артикул меняет только значения 'Наименование и т.д'
      + Из тех, которые уникальные, создает новые справочники
    + `Выгрузить`
      + Выгружает все справочники в формате `xlsx` с прикрепленными к ним позициями из разных складов
      + Так как товары бывают схожие, но наименование описание все разное, у каждой организации так и же цена
    
> После Выгрузки менеджеры формируют собственный прайс из данных, полученных от каждой организации для составления собственного предложения.

![exel](https://github.com/Yasuoqp/Price-processor/blob/main/readmeIcon/exel.png)
